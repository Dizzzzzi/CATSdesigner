<div class="projects-list-component">
  <table matSort class="table_header" (matSortChange)="sortData($event)">
    <tr class="projects-list-component__project" style="padding-bottom: 10px">
      <td style="text-align: center">№</td>
      <td mat-sort-header="Theme">Тема курсового проекта (работы)</td>
      <td mat-sort-header="Student">Студент</td>
      <td mat-sort-header="Group">Группа</td>
      <td mat-sort-header="ApproveDate">Дата</td>
      <td>Действие</td>
    </tr>
  </table>
  <div class="projects-list-component__project" *ngFor="let project of projects; index as i">
    <p style="text-align: center">{{ i + 1 }}</p>
    <p>{{ project.Theme }}</p>
    <p>{{ project.Student }}</p>
    <p>{{ project.Group }}</p>
    <p>{{ project.ApproveDate | date:'dd/MM/yyyy'}}</p>
    <div *ngIf="courseUser.IsStudent">
      <button mat-icon-button color="primary" matTooltip="Скачать лист задания" matTooltipPosition="before"
              *ngIf="project.StudentId == courseUser.UserId && project.ApproveDate != null">
        <mat-icon>cloud_download</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="Выбрать тему" matTooltipPosition="before"
              *ngIf="!(courseUser.HasAssignedDiplomProject || courseUser.HasChosenDiplomProject)
            && project.StudentId == null" (click)="projectsComponent.chooseCourseProject(project.Id)">
        <mat-icon>done</mat-icon>
      </button>
    </div>
    <div *ngIf="courseUser.IsLecturer">
      <button mat-icon-button color="primary" matTooltip="Редактировать" matTooltipPosition="before" (click)="projectsComponent.editProject(project)">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="Назначить" matTooltipPosition="before" (click)="projectsComponent.assignProject(project)"
              *ngIf="project.StudentId == null">
        <mat-icon>assignment</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="Отменить назначение" matTooltipPosition="before" (click)="projectsComponent.removeAssignment(project)"
              *ngIf="project.StudentId != null">
        <mat-icon>remove_circle_outline</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="Скачать лист задания" matTooltipPosition="before"
              *ngIf="project.StudentId != null">
        <mat-icon>cloud_download</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="Удалить" matTooltipPosition="before" (click)="projectsComponent.deleteProject(project)">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>
</div>
